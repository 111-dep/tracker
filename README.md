# Solana 钱包资产分析工具 v0.6

一个专注于 Solana 链上资产分析的命令行工具，支持多钱包资产追踪、实时价格更新和变化率监控。

## 最新特性 (v0.6)

### 1. 实时变化率监控
```bash
# 终端输出示例
$44467536.89 (-0.01%/s) [07:39:40]  # 总资产实时变化
```

### 2. 代币监控范围
- 实时跟踪 TOP 50 代币价值变化
- 每 20 秒自动更新一次数据
- 支持扩展至 TOP 100 代币（开发中）

### 3. 日志级别控制
```bash
# 设置日志级别
LOG_LEVEL=INFO    # 默认：仅显示总值和变化率
LOG_LEVEL=WARN    # 警告：显示异常波动
LOG_LEVEL=ALERT   # 报警：仅显示严重异常
LOG_LEVEL=DEBUG   # 调试：显示所有详细信息
```

## 系统架构

### 1. 数据获取层
- **钱包数据源**
  - Helius DAS API: 代币详细信息
  - RPC API: 备选数据源
  - 并发处理: 多钱包同时处理

- **价格数据源**
  - Jupiter API v2: 实时价格和可信度
  - CoinMarketCap API: 备选价格源

### 2. 数据处理层
- **代币数据处理**
  - 自动合并同类代币
  - 智能处理代币精度
  - 实时变化率计算

- **价格处理**
  - 多级可信度评估
  - 异常价格过滤
  - 价格合理性检查

### 3. 监控引擎
- **变化率计算**
  ```
  总值变化率 = (当前值 - 上次值) / 时间间隔
  单币变化率 = (当前价值 - 上次价值) / 时间间隔
  ```

## 使用方法

### 1. 环境配置
```bash
# 复制并配置环境变量
cp .env.example .env

# 编辑 .env 文件
HELIUS_RPC_ENDPOINT=YOUR_ENDPOINT
HELIUS_API_KEY=YOUR_API_KEY
```

### 2. 运行程序
```bash
# 默认模式（实时总值监控）
go run main.go -all

# 调试模式（显示详细信息）
LOG_LEVEL=DEBUG go run main.go -all
```

## 优化计划 (v0.7)

### 1. 监控范围扩展
- 扩大到 TOP 100 代币监控
- 为每个代币添加实时变化率显示
- 优化数据更新频率

### 2. 程序结构重构
- 统一日志记录机制
- 简化数据存储方式
- 明确模块职责分工

### 3. 输出优化
- 合并重复的日志内容
- 简化 CSV 记录格式
- 优化终端显示布局

### 4. 性能提升
- 减少不必要的数据写入
- 优化内存使用
- 提高响应速度

## 已知问题

### 1. 结构重叠
- monitor.csv、wallet-tracker.log 和 terminal 输出存在重叠
- 日志内容过于繁琐
- 模块职责不够清晰

### 2. 性能问题
- 频繁的文件写入操作
- 重复的数据处理
- 内存使用效率待优化

### 3. 监控局限
- 仅显示总值变化率
- 单个代币变化率未显示
- 更新频率固定

## 下一步改进

### 1. 结构优化
- 统一日志记录系统
- 明确各模块职责
- 简化数据流转过程

### 2. 功能增强
- 单币变化率显示
- 自定义监控范围
- 灵活的更新频率

### 3. 性能提升
- 优化数据存储
- 减少重复计算
- 提高响应速度

## 注意事项

1. 资源使用
   - 建议定期清理日志文件
   - 监控 CSV 文件大小
   - 注意内存占用

2. 监控精度
   - 20秒更新间隔
   - 价格实时性依赖 API
   - 变化率为实时计算

3. 安全性
   - 本地配置文件
   - API 密钥保护
   - 只读操作

## 许可证

MIT License 
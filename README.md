# Solana 钱包资产分析工具 v0.5

一个专注于 Solana 链上资产分析的命令行工具，提供精确的代币估值和实时价格追踪。

## 主要特性

### 1. 资产发现
- 支持多钱包地址批量分析
- 自动发现所有代币账户（包括 SPL 代币和原生 SOL）
- 智能合并同类代币账户
- 支持 Associated Token Account (ATA) 识别

### 2. 价格追踪
- 实时获取 Jupiter 价格数据
- 多级价格可信度评估（high/medium/low）
- 智能过滤异常价格数据
- 支持自定义价格来源配置

### 3. 资产估值
- 精确的代币数量计算（自动处理 decimals）
- 实时市场价值评估
- 完整的计算过程展示
- 按价值排序的 TOP 50 代币展示

## 快速开始

### 1. 配置环境
```bash
# 复制环境配置模板
cp .env.example .env

# 编辑配置文件，填入必要的 API 密钥
vim .env
```

### 2. 配置钱包
```yaml
# config/wallets.yaml
wallets:
  - name: "主钱包"
    address: "你的钱包地址"
  - name: "测试钱包"
    address: "其他钱包地址"
```

### 3. 运行分析
```bash
# 分析指定钱包
go run main.go -wallet YOUR_WALLET_ADDRESS

# 分析配置文件中的所有钱包
go run main.go -all
```

## 输出示例

```
代币持仓报告
生成时间: 2024-02-16 02:41:04
----------------------------------------

排名  |代币        |           总持有量   |        总价值 (USD)|  可信度   |
----------------------------------------------------------------------
1     |SOL         |              123.45  |             $2,469 |    high   |
      |Mint: So11111111111111111111111111111111111111112      |
      |数量: 123.45000000                                      |
      |价格: $20.00000000                                      |
      |计算: 123.45000000 * $20.00000000 = $2,469.000000      |
----------------------------------------------------------------------
```

## 技术细节

### 1. 数据来源
- 钱包数据：Helius DAS API
- 价格数据：Jupiter Price API v2
- 备选数据：CoinMarketCap API（可配置）

### 2. 计算规则
- 代币数量：原始数量 / (10 ^ decimals)
- 代币价值：实际数量 * 当前价格
- 价格可信度：基于流动性和价格来源评估

### 3. 筛选机制
- 自动过滤空账户
- 过滤可信度为 "low" 的价格数据
- 过滤异常价格（超出合理范围）
- 保留价值排名前 50 的代币

## 环境要求

- Go 1.21+
- Helius API Key（用于获取代币数据）
- 互联网连接（用于实时价格查询）

## 配置说明

### 必需配置（.env）
```env
HELIUS_RPC_ENDPOINT=YOUR_ENDPOINT
HELIUS_API_KEY=YOUR_API_KEY
```

### 可选配置
```env
CMC_API_KEY=YOUR_CMC_API_KEY  # 用于备选价格数据
```

## 注意事项

1. 价格数据
   - 优先使用 Jupiter 提供的价格
   - 仅使用可信度为 high/medium 的数据
   - 定期刷新以保证实时性

2. 资产计算
   - 自动处理代币精度
   - 展示完整计算过程
   - 保留合适的小数位数

3. 安全性
   - 仅读取钱包数据，不执行任何交易
   - 敏感配置信息本地存储
   - API 密钥严格保密

## 许可证

MIT License 